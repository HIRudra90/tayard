(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,60389,e=>{"use strict";e.s(["default",()=>i]);var t=e.i(3126),l=e.i(21924);let r=["wishlist","reading","completed"];function i(){let[e,i]=(0,l.useState)([]),[o,a]=(0,l.useState)(!0),[s,n]=(0,l.useState)(""),[d,c]=(0,l.useState)("all"),[u,h]=(0,l.useState)(""),[p,f]=(0,l.useState)(""),[x,g]=(0,l.useState)("wishlist"),[b,y]=(0,l.useState)(!1),[m,v]=(0,l.useState)(null),[j,k]=(0,l.useState)(null),S=(0,l.useRef)(null),[w,C]=(0,l.useState)("dark"),T={wishlist:{bg:"#60a5fa",text:"#041022"},reading:{bg:"#facc15",text:"#031527"},completed:{bg:"#10b981",text:"#031527"}};function R(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";e instanceof Error?console.error(t,e.message,e):console.error(t,e)}let A=async()=>{a(!0),v(null);try{let e=await fetch("/api/books");if(!e.ok){let t=await e.text().catch(()=>"Failed to read error body");throw Error(t||"Server responded ".concat(e.status))}let t=await e.json();i(Array.isArray(t)?t:[])}catch(e){R(e,"fetchBooks error:"),v("Failed to load books (see console).")}finally{a(!1)}};(0,l.useEffect)(()=>{try{let e=localStorage.getItem("booktracker_theme");e&&("dark"===e||"light"===e)&&C(e)}catch(e){}A();let e=e=>{S.current&&!S.current.contains(e.target)&&k(null)};return document.addEventListener("click",e),()=>document.removeEventListener("click",e)},[]),(0,l.useEffect)(()=>{try{localStorage.setItem("booktracker_theme",w)}catch(e){}},[w]);let E=async e=>{null==e||e.preventDefault(),v(null);let t=u.trim();if(!t)return void v("Title required");y(!0);try{let e=await fetch("/api/books",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:t,author:p.trim()||null,status:x})});if(!e.ok){let t=await e.text().catch(()=>"server error");throw Error(t||"Server ".concat(e.status))}h(""),f(""),g("wishlist"),await A()}catch(e){R(e,"onAdd error:"),v("Failed to add book (see console).")}finally{y(!1)}},I=async(e,t)=>{i(l=>l.map(l=>l.id===e?{...l,status:t}:l)),k(null);try{let l=await fetch("/api/books/".concat(e),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:t})});if(!l.ok){let e=await l.text().catch(()=>"server error");throw Error(e||"Server ".concat(l.status))}}catch(e){R(e,"updateStatus error:"),v("Failed to update status (see console)."),A()}},W=async e=>{if(confirm("Delete this book?"))try{let t=await fetch("/api/books/".concat(e),{method:"DELETE"});if(!t.ok){let e=await t.text().catch(()=>"server error");throw Error(e||"Server ".concat(t.status))}i(t=>t.filter(t=>t.id!==e))}catch(e){R(e,"removeBook error:"),v("Delete failed (see console)."),A()}},z=e.filter(e=>"all"===d||e.status===d).filter(e=>{var t,l;if(!s.trim())return!0;let r=s.toLowerCase();return(null!=(t=e.title)?t:"").toLowerCase().includes(r)||(null!=(l=e.author)?l:"").toLowerCase().includes(r)}),L="dark"===w,B=L?"rgba(255,255,255,0.25)":"rgba(30,58,138,0.25)",D=L?"#9aa7b6":"#4b5563",P={padding:"10px 16px",height:42,borderRadius:6,border:"1px solid ".concat(B),cursor:"pointer",fontWeight:700,display:"inline-flex",alignItems:"center",justifyContent:"center"},F={...P,background:L?"#4f9bff":"#2563eb",color:"#fff",boxShadow:L?"0 4px 10px rgba(79,155,255,0.14)":"0 4px 14px rgba(37,99,235,0.18)"},O={...P,background:L?"#0b1a29":"#f2f6ff",color:L?"#e6eef7":"#05253f"},U={padding:"12px 14px",borderRadius:6,border:"1px solid ".concat(B),background:L?"#071727":"#ffffff",color:L?"#e6eef7":"#05253f",fontSize:14,boxSizing:"border-box",flex:1},_={position:"absolute",left:0,top:"calc(100% + 8px)",background:L?"#071d2e":"#fff",border:"1px solid ".concat(B),borderRadius:6,boxShadow:"0 6px 20px rgba(0,0,0,0.25)",zIndex:50,minWidth:160};return(0,t.jsx)("div",{style:{minHeight:"100vh",background:L?"#05070a":"linear-gradient(180deg,#e7f3ff,#f9fbff)",color:L?"#e6eef7":"#05253f",fontFamily:'Inter, system-ui, -apple-system, "Segoe UI", Roboto, Arial',padding:18},children:(0,t.jsxs)("div",{style:{maxWidth:1120,margin:"6px auto"},ref:S,children:[(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{children:"Your Books"}),(0,t.jsx)("p",{style:{color:D},children:"Dashboard To Get Hired"})]}),(0,t.jsxs)("div",{style:{display:"flex",gap:8},children:[(0,t.jsx)("button",{onClick:()=>C(e=>"dark"===e?"light":"dark"),style:O,children:L?"Lite":"Dark"}),(0,t.jsx)("button",{onClick:A,style:O,children:"Refresh"})]})]}),(0,t.jsxs)("div",{style:{display:"flex",gap:8,marginTop:12,alignItems:"center"},children:[(0,t.jsx)("input",{placeholder:"Search by title or author",value:s,onChange:e=>n(e.target.value),style:{...U,flex:1}}),(0,t.jsxs)("select",{value:d,onChange:e=>c(e.target.value),style:{...U,width:160},children:[(0,t.jsx)("option",{value:"all",children:"All statuses"}),(0,t.jsx)("option",{value:"wishlist",children:"Wishlist"}),(0,t.jsx)("option",{value:"reading",children:"Reading"}),(0,t.jsx)("option",{value:"completed",children:"Completed"})]}),(0,t.jsx)("div",{style:{marginLeft:"auto"},children:(0,t.jsx)("button",{onClick:()=>{n(""),c("all")},style:O,children:"Clear"})})]}),(0,t.jsxs)("form",{onSubmit:E,style:{display:"flex",gap:8,alignItems:"center",marginTop:12},children:[(0,t.jsx)("input",{placeholder:"Title (required)",value:u,onChange:e=>h(e.target.value),style:U}),(0,t.jsx)("input",{placeholder:"Author (optional)",value:p,onChange:e=>f(e.target.value),style:{...U,width:320}}),(0,t.jsxs)("select",{value:x,onChange:e=>g(e.target.value),style:{padding:"10px 14px",borderRadius:6,border:"1px solid rgba(0,0,0,0.06)",background:T[x].bg,color:T[x].text,fontWeight:800},children:[(0,t.jsx)("option",{value:"wishlist",children:"Wishlist"}),(0,t.jsx)("option",{value:"reading",children:"Reading"}),(0,t.jsx)("option",{value:"completed",children:"Completed"})]}),(0,t.jsxs)("div",{style:{marginLeft:"auto",display:"flex",gap:8},children:[(0,t.jsx)("button",{type:"submit",disabled:b,style:F,children:b?"Adding…":"Add"}),(0,t.jsx)("button",{type:"button",onClick:()=>{h(""),f(""),g("wishlist"),v(null)},style:O,children:"Clear"})]})]}),m&&(0,t.jsx)("div",{style:{color:"#ff8080",marginTop:8},children:m}),(0,t.jsx)("div",{style:{display:"grid",gap:14,marginTop:12},children:o?(0,t.jsx)("div",{style:{color:D},children:"Loading…"}):z.length?z.map((e,l)=>{var i,o,a,s;let n=null!=(i=e.status)?i:"wishlist",d=null!=(o=T[n])?o:T.wishlist,c=j===e.id;return(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",background:L?"#0b2540":"#ffffff",padding:"18px 20px",borderRadius:10,border:"1px solid ".concat(B),boxShadow:L?"0 6px 20px rgba(0,0,0,0.5)":"0 4px 16px rgba(37,99,235,0.08)",transition:"transform 160ms ease"},children:[(0,t.jsxs)("div",{style:{maxWidth:"68%"},children:[(0,t.jsx)("div",{style:{fontWeight:800,fontSize:20,marginBottom:6},children:e.title}),(0,t.jsxs)("div",{style:{color:D,fontStyle:"italic"},children:[e.author&&"".concat(e.author," • ")||"",(0,t.jsx)("span",{style:{textTransform:"capitalize"},children:null!=(a=e.status)?a:"—"})]})]}),(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:12},children:[(0,t.jsxs)("div",{style:{position:"relative",display:"inline-block"},children:[(0,t.jsxs)("div",{onClick:t=>{t.stopPropagation(),k(c?null:e.id)},style:{...{display:"inline-flex",alignItems:"center",gap:8,padding:"8px 14px",borderRadius:6,background:d.bg,color:d.text,fontWeight:800,cursor:"pointer",minWidth:110,justifyContent:"center"},background:d.bg,color:d.text},children:[(0,t.jsx)("span",{style:{width:10,height:10,borderRadius:999,background:"#ffffff55",display:"inline-block"}}),(0,t.jsx)("span",{style:{textTransform:"capitalize"},children:n})]}),c&&(0,t.jsx)("div",{style:_,onClick:e=>e.stopPropagation(),children:r.map(l=>{let r=T[l],i=l===n?L?"#0b2b3a":"#f6fbff":L?"#06202e":"#fff",o=l===n?r.text:L?"#e6eef7":"#07203a";return(0,t.jsxs)("div",{role:"button",onClick:()=>I(e.id,l),style:{padding:"12px 14px",cursor:"pointer",background:i,color:o,fontWeight:800},children:[(0,t.jsx)("span",{style:{width:10,height:10,borderRadius:999,background:r.bg,display:"inline-block",marginRight:10}}),(0,t.jsx)("span",{style:{textTransform:"capitalize"},children:l})]},l)})})]}),(0,t.jsx)("button",{onClick:()=>W(e.id),style:{padding:"10px 14px",borderRadius:6,background:"#2563eb",color:"#fff",fontWeight:700,border:"none"},children:"Delete"}),(0,t.jsx)("div",{style:{color:D,fontSize:12},children:e.created_at&&(s=e.created_at)?s.replace("T"," ").split(".")[0]:""})]})]},e.id)}):(0,t.jsx)("div",{style:{color:D},children:"No books yet — add one above."})}),(0,t.jsxs)("div",{style:{marginTop:12,color:D,fontSize:13},children:['Tip: click a colored pill to open the menu. If you see "Unauthorized" in console, ensure SUPABASE keys are set in ',(0,t.jsx)("code",{children:".env.local"}),"."]})]})})}}]);
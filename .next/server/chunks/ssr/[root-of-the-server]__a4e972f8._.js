module.exports=[18622,(a,b,c)=>{b.exports=a.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},88903,(a,b,c)=>{"use strict";b.exports=a.r(18622)},53377,(a,b,c)=>{"use strict";b.exports=a.r(88903).vendored["react-ssr"].ReactJsxRuntime},21801,(a,b,c)=>{"use strict";b.exports=a.r(88903).vendored["react-ssr"].React},14524,a=>{"use strict";a.s(["default",()=>e]);var b=a.i(53377),c=a.i(21801);let d=["wishlist","reading","completed"];function e(){let[a,e]=(0,c.useState)([]),[f,g]=(0,c.useState)(!0),[h,i]=(0,c.useState)(""),[j,k]=(0,c.useState)("all"),[l,m]=(0,c.useState)(""),[n,o]=(0,c.useState)(""),[p,q]=(0,c.useState)("wishlist"),[r,s]=(0,c.useState)(!1),[t,u]=(0,c.useState)(null),[v,w]=(0,c.useState)(null),x=(0,c.useRef)(null),[y,z]=(0,c.useState)("dark"),A={wishlist:{bg:"#60a5fa",text:"#041022"},reading:{bg:"#facc15",text:"#031527"},completed:{bg:"#10b981",text:"#031527"}};function B(a,b=""){a instanceof Error?console.error(b,a.message,a):console.error(b,a)}let C=async()=>{g(!0),u(null);try{let a=await fetch("/api/books");if(!a.ok){let b=await a.text().catch(()=>"Failed to read error body");throw Error(b||`Server responded ${a.status}`)}let b=await a.json();e(Array.isArray(b)?b:[])}catch(a){B(a,"fetchBooks error:"),u("Failed to load books (see console).")}finally{g(!1)}};(0,c.useEffect)(()=>{try{let a=localStorage.getItem("booktracker_theme");a&&("dark"===a||"light"===a)&&z(a)}catch{}C();let a=a=>{x.current&&!x.current.contains(a.target)&&w(null)};return document.addEventListener("click",a),()=>document.removeEventListener("click",a)},[]),(0,c.useEffect)(()=>{try{localStorage.setItem("booktracker_theme",y)}catch{}},[y]);let D=async a=>{a?.preventDefault(),u(null);let b=l.trim();if(!b)return void u("Title required");s(!0);try{let a=await fetch("/api/books",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:b,author:n.trim()||null,status:p})});if(!a.ok){let b=await a.text().catch(()=>"server error");throw Error(b||`Server ${a.status}`)}m(""),o(""),q("wishlist"),await C()}catch(a){B(a,"onAdd error:"),u("Failed to add book (see console).")}finally{s(!1)}},E=async(a,b)=>{e(c=>c.map(c=>c.id===a?{...c,status:b}:c)),w(null);try{let c=await fetch(`/api/books/${a}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:b})});if(!c.ok){let a=await c.text().catch(()=>"server error");throw Error(a||`Server ${c.status}`)}}catch(a){B(a,"updateStatus error:"),u("Failed to update status (see console)."),C()}},F=async a=>{if(confirm("Delete this book?"))try{let b=await fetch(`/api/books/${a}`,{method:"DELETE"});if(!b.ok){let a=await b.text().catch(()=>"server error");throw Error(a||`Server ${b.status}`)}e(b=>b.filter(b=>b.id!==a))}catch(a){B(a,"removeBook error:"),u("Delete failed (see console)."),C()}},G=a.filter(a=>"all"===j||a.status===j).filter(a=>{if(!h.trim())return!0;let b=h.toLowerCase();return(a.title??"").toLowerCase().includes(b)||(a.author??"").toLowerCase().includes(b)}),H="dark"===y,I=H?"rgba(255,255,255,0.25)":"rgba(30,58,138,0.25)",J=H?"#9aa7b6":"#4b5563",K={padding:"10px 16px",height:42,borderRadius:6,border:`1px solid ${I}`,cursor:"pointer",fontWeight:700,display:"inline-flex",alignItems:"center",justifyContent:"center"},L={...K,background:H?"#4f9bff":"#2563eb",color:"#fff",boxShadow:H?"0 4px 10px rgba(79,155,255,0.14)":"0 4px 14px rgba(37,99,235,0.18)"},M={...K,background:H?"#0b1a29":"#f2f6ff",color:H?"#e6eef7":"#05253f"},N={padding:"12px 14px",borderRadius:6,border:`1px solid ${I}`,background:H?"#071727":"#ffffff",color:H?"#e6eef7":"#05253f",fontSize:14,boxSizing:"border-box",flex:1},O={position:"absolute",left:0,top:"calc(100% + 8px)",background:H?"#071d2e":"#fff",border:`1px solid ${I}`,borderRadius:6,boxShadow:"0 6px 20px rgba(0,0,0,0.25)",zIndex:50,minWidth:160};return(0,b.jsx)("div",{style:{minHeight:"100vh",background:H?"#05070a":"linear-gradient(180deg,#e7f3ff,#f9fbff)",color:H?"#e6eef7":"#05253f",fontFamily:'Inter, system-ui, -apple-system, "Segoe UI", Roboto, Arial',padding:18},children:(0,b.jsxs)("div",{style:{maxWidth:1120,margin:"6px auto"},ref:x,children:[(0,b.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{children:"Your Books"}),(0,b.jsx)("p",{style:{color:J},children:"Dashboard To Get Hired"})]}),(0,b.jsxs)("div",{style:{display:"flex",gap:8},children:[(0,b.jsx)("button",{onClick:()=>z(a=>"dark"===a?"light":"dark"),style:M,children:H?"Lite":"Dark"}),(0,b.jsx)("button",{onClick:C,style:M,children:"Refresh"})]})]}),(0,b.jsxs)("div",{style:{display:"flex",gap:8,marginTop:12,alignItems:"center"},children:[(0,b.jsx)("input",{placeholder:"Search by title or author",value:h,onChange:a=>i(a.target.value),style:{...N,flex:1}}),(0,b.jsxs)("select",{value:j,onChange:a=>k(a.target.value),style:{...N,width:160},children:[(0,b.jsx)("option",{value:"all",children:"All statuses"}),(0,b.jsx)("option",{value:"wishlist",children:"Wishlist"}),(0,b.jsx)("option",{value:"reading",children:"Reading"}),(0,b.jsx)("option",{value:"completed",children:"Completed"})]}),(0,b.jsx)("div",{style:{marginLeft:"auto"},children:(0,b.jsx)("button",{onClick:()=>{i(""),k("all")},style:M,children:"Clear"})})]}),(0,b.jsxs)("form",{onSubmit:D,style:{display:"flex",gap:8,alignItems:"center",marginTop:12},children:[(0,b.jsx)("input",{placeholder:"Title (required)",value:l,onChange:a=>m(a.target.value),style:N}),(0,b.jsx)("input",{placeholder:"Author (optional)",value:n,onChange:a=>o(a.target.value),style:{...N,width:320}}),(0,b.jsxs)("select",{value:p,onChange:a=>q(a.target.value),style:{padding:"10px 14px",borderRadius:6,border:"1px solid rgba(0,0,0,0.06)",background:A[p].bg,color:A[p].text,fontWeight:800},children:[(0,b.jsx)("option",{value:"wishlist",children:"Wishlist"}),(0,b.jsx)("option",{value:"reading",children:"Reading"}),(0,b.jsx)("option",{value:"completed",children:"Completed"})]}),(0,b.jsxs)("div",{style:{marginLeft:"auto",display:"flex",gap:8},children:[(0,b.jsx)("button",{type:"submit",disabled:r,style:L,children:r?"Adding…":"Add"}),(0,b.jsx)("button",{type:"button",onClick:()=>{m(""),o(""),q("wishlist"),u(null)},style:M,children:"Clear"})]})]}),t&&(0,b.jsx)("div",{style:{color:"#ff8080",marginTop:8},children:t}),(0,b.jsx)("div",{style:{display:"grid",gap:14,marginTop:12},children:f?(0,b.jsx)("div",{style:{color:J},children:"Loading…"}):G.length?G.map((a,c)=>{var e;let f=a.status??"wishlist",g=A[f]??A.wishlist,h=v===a.id;return(0,b.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",background:H?"#0b2540":"#ffffff",padding:"18px 20px",borderRadius:10,border:`1px solid ${I}`,boxShadow:H?"0 6px 20px rgba(0,0,0,0.5)":"0 4px 16px rgba(37,99,235,0.08)",transition:"transform 160ms ease"},children:[(0,b.jsxs)("div",{style:{maxWidth:"68%"},children:[(0,b.jsx)("div",{style:{fontWeight:800,fontSize:20,marginBottom:6},children:a.title}),(0,b.jsxs)("div",{style:{color:J,fontStyle:"italic"},children:[a.author&&`${a.author} • `||"",(0,b.jsx)("span",{style:{textTransform:"capitalize"},children:a.status??"—"})]})]}),(0,b.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:12},children:[(0,b.jsxs)("div",{style:{position:"relative",display:"inline-block"},children:[(0,b.jsxs)("div",{onClick:b=>{b.stopPropagation(),w(h?null:a.id)},style:{...{display:"inline-flex",alignItems:"center",gap:8,padding:"8px 14px",borderRadius:6,background:g.bg,color:g.text,fontWeight:800,cursor:"pointer",minWidth:110,justifyContent:"center"},background:g.bg,color:g.text},children:[(0,b.jsx)("span",{style:{width:10,height:10,borderRadius:999,background:"#ffffff55",display:"inline-block"}}),(0,b.jsx)("span",{style:{textTransform:"capitalize"},children:f})]}),h&&(0,b.jsx)("div",{style:O,onClick:a=>a.stopPropagation(),children:d.map(c=>{let d=A[c],e=c===f?H?"#0b2b3a":"#f6fbff":H?"#06202e":"#fff",g=c===f?d.text:H?"#e6eef7":"#07203a";return(0,b.jsxs)("div",{role:"button",onClick:()=>E(a.id,c),style:{padding:"12px 14px",cursor:"pointer",background:e,color:g,fontWeight:800},children:[(0,b.jsx)("span",{style:{width:10,height:10,borderRadius:999,background:d.bg,display:"inline-block",marginRight:10}}),(0,b.jsx)("span",{style:{textTransform:"capitalize"},children:c})]},c)})})]}),(0,b.jsx)("button",{onClick:()=>F(a.id),style:{padding:"10px 14px",borderRadius:6,background:"#2563eb",color:"#fff",fontWeight:700,border:"none"},children:"Delete"}),(0,b.jsx)("div",{style:{color:J,fontSize:12},children:a.created_at&&(e=a.created_at)?e.replace("T"," ").split(".")[0]:""})]})]},a.id)}):(0,b.jsx)("div",{style:{color:J},children:"No books yet — add one above."})}),(0,b.jsxs)("div",{style:{marginTop:12,color:J,fontSize:13},children:['Tip: click a colored pill to open the menu. If you see "Unauthorized" in console, ensure SUPABASE keys are set in ',(0,b.jsx)("code",{children:".env.local"}),"."]})]})})}}];

//# sourceMappingURL=%5Broot-of-the-server%5D__a4e972f8._.js.map